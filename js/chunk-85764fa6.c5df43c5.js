(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85764fa6"],{1799:function(t,e,i){"use strict";var n=i("7a23"),o={"aria-label":"Page navigation example"},c={class:"pagination justify-content-center"},a=Object(n["h"])("span",{"aria-hidden":"true"},"«",-1),r=Object(n["h"])("span",{"aria-hidden":"true"},"»",-1);function s(t,e,i,s,l,u){return Object(n["t"])(),Object(n["d"])("nav",o,[Object(n["h"])("ul",c,[Object(n["h"])("li",{class:["page-item",{disabled:!i.paginationData.has_pre}]},[Object(n["h"])("button",{type:"button",class:"page-link",onClick:e[1]||(e[1]=function(t){return u.changePage("pre")})},[a])],2),(Object(n["t"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])(i.paginationData.total_pages,(function(t){return Object(n["t"])(),Object(n["d"])("li",{class:["page-item",{active:t===i.paginationData.current_page}],key:t},[Object(n["h"])("button",{type:"button",class:"page-link",onClick:function(e){return u.changePage(t)},disabled:t===i.paginationData.current_page},Object(n["B"])(t),9,["onClick","disabled"])],2)})),128)),Object(n["h"])("li",{class:["page-item",{disabled:!i.paginationData.has_next}]},[Object(n["h"])("button",{type:"button",class:"page-link","aria-label":"Next",onClick:e[2]||(e[2]=function(t){return u.changePage("next")})},[r])],2)])])}var l={emits:["getData"],props:["paginationData"],methods:{changePage:function(t){var e=t;"next"===t?e=this.paginationData.current_page+1:"pre"===t&&(e=this.paginationData.current_page-1),this.$emit("getData",e)}}};l.render=s;e["a"]=l},"1dde":function(t,e,i){var n=i("d039"),o=i("b622"),c=i("2d00"),a=o("species");t.exports=function(t){return c>=51||!n((function(){var e=[],i=e.constructor={};return i[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2532:function(t,e,i){"use strict";var n=i("23e7"),o=i("5a34"),c=i("1d80"),a=i("ab13");n({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(c(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,i){var n=i("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},8418:function(t,e,i){"use strict";var n=i("c04e"),o=i("9bf2"),c=i("5c6c");t.exports=function(t,e,i){var a=n(e);a in t?o.f(t,a,c(0,i)):t[a]=i}},"99af":function(t,e,i){"use strict";var n=i("23e7"),o=i("d039"),c=i("e8b5"),a=i("861d"),r=i("7b0b"),s=i("50c4"),l=i("8418"),u=i("65f0"),p=i("1dde"),d=i("b622"),h=i("2d00"),b=d("isConcatSpreadable"),f=9007199254740991,O="Maximum allowed index exceeded",g=h>=51||!o((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),v=p("concat"),j=function(t){if(!a(t))return!1;var e=t[b];return void 0!==e?!!e:c(t)},m=!g||!v;n({target:"Array",proto:!0,forced:m},{concat:function(t){var e,i,n,o,c,a=r(this),p=u(a,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(c=-1===e?a:arguments[e],j(c)){if(o=s(c.length),d+o>f)throw TypeError(O);for(i=0;i<o;i++,d++)i in c&&l(p,d,c[i])}else{if(d>=f)throw TypeError(O);l(p,d++,c)}return p.length=d,p}})},a434:function(t,e,i){"use strict";var n=i("23e7"),o=i("23cb"),c=i("a691"),a=i("50c4"),r=i("7b0b"),s=i("65f0"),l=i("8418"),u=i("1dde"),p=u("splice"),d=Math.max,h=Math.min,b=9007199254740991,f="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var i,n,u,p,O,g,v=r(this),j=a(v.length),m=o(t,j),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=j-m):(i=y-2,n=h(d(c(e),0),j-m)),j+i-n>b)throw TypeError(f);for(u=s(v,n),p=0;p<n;p++)O=m+p,O in v&&l(u,p,v[O]);if(u.length=n,i<n){for(p=m;p<j-n;p++)O=p+n,g=p+i,O in v?v[g]=v[O]:delete v[g];for(p=j;p>j-n+i;p--)delete v[p-1]}else if(i>n)for(p=j-n;p>m;p--)O=p+n-1,g=p+i-1,O in v?v[g]=v[O]:delete v[g];for(p=0;p<i;p++)v[p+m]=arguments[p+2];return v.length=j-n+i,u}})},ab13:function(t,e,i){var n=i("b622"),o=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[o]=!1,"/./"[t](e)}catch(n){}}return!1}},caad:function(t,e,i){"use strict";var n=i("23e7"),o=i("4d64").includes,c=i("44d2");n({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),c("includes")},ed84:function(t,e,i){"use strict";i.r(e);i("caad"),i("2532");var n=i("7a23"),o={class:"wrap"},c=Object(n["h"])("div",{class:"productsBanner"},[Object(n["h"])("div",{class:"titleArea"},[Object(n["h"])("h2",null,"拼圖列表")])],-1),a={class:"container"},r={class:"row py-3 py-md-6"},s={class:"col-md-3 d-none d-md-block"},l={class:"productMenu list-group list-unstyled text-center"},u={class:"position-relative"},p={class:"position-relative"},d={class:"mobileMenu d-block d-md-none"},h=Object(n["f"])('<option value="全部拼圖" selected>全部拼圖</option><option value="本月新品">本月新品</option><option value="本月優惠">本月優惠</option><option value="拼圖片數">拼圖片數</option><option value="拼圖風格">拼圖風格</option>',5),b=Object(n["f"])('<option value="" disabled selected>請選擇拼圖片數</option><option value="100">100片</option><option value="500">500片</option><option value="1000">1000片</option><option value="2000">2000片</option><option value="4000">4000片</option>',6),f=Object(n["f"])('<option value="" disabled selected>請選擇拼圖風格</option><option value="風景">風景</option><option value="建築">建築</option><option value="動物">動物</option><option value="插畫">插畫</option>',5),O={class:"col-md-9"},g={class:"cardList list-unstyled p-0 row"},v={class:"pictureArea overflow-hidden card-img-top position-relative"},j={class:"card-body d-flex flex-column justify-content-between"},m={class:"position-relative"},y={class:"card-title fw-bold mb-9"},P={key:0,class:"h3 mb-3"},C={class:"h6 text-decoration-line-through"},w={key:0,class:"h6 fw-bold"},x={key:1,class:"h3 mb-3"},k={key:0,class:"h6 fw-bold"},L={class:"d-flex flex-row-reverse justify-content-between"},I={class:"pieceBtnArea"},S=Object(n["h"])("i",{class:"bi bi-bookmark-star icon"},null,-1),B=Object(n["h"])("i",{class:"bi bi-bookmark-star-fill text-primary hover"},null,-1),D=Object(n["h"])("button",{type:"button",class:"btn btn-outline-dark moreProductBtn"}," 查看更多",-1),_={key:0,class:"loading"},F=Object(n["h"])("div",{class:"icon"},null,-1);function A(t,e,i,A,$,E){var M=Object(n["y"])("CollapseList"),N=Object(n["y"])("Pagination");return Object(n["t"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("div",o,[c,Object(n["h"])("div",a,[Object(n["h"])("div",r,[Object(n["h"])("div",s,[Object(n["h"])("ul",l,[Object(n["h"])("li",null,[Object(n["h"])("a",{href:"#",class:["list-group-item list-group-item-action",{active:"全部拼圖"===$.activeOption}],onClick:e[1]||(e[1]=Object(n["L"])((function(t){return E.changeOption("全部拼圖")}),["prevent"]))}," 全部拼圖 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{href:"#",class:["list-group-item list-group-item-action",{active:"本月新品"===$.activeOption}],onClick:e[2]||(e[2]=Object(n["L"])((function(t){return E.changeOption("本月新品")}),["prevent"]))},"本月新品",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{href:"#",class:["list-group-item list-group-item-action",{active:"本月優惠"===$.activeOption}],onClick:e[3]||(e[3]=Object(n["L"])((function(t){return E.changeOption("本月優惠")}),["prevent"]))},"本月優惠",2)]),Object(n["h"])("li",u,[Object(n["h"])("a",{href:"#",class:"list-group-item list-group-item-action",onClick:e[4]||(e[4]=Object(n["L"])((function(t){return E.collapseSwitch("pieceCollapse")}),["prevent"]))},"拼圖片數"),Object(n["h"])("i",{class:["bi bi-chevron-down position-absolute icon",{iconActive:$.openCollapse.pieceCollapse}]},null,2),Object(n["h"])(M,{ref:"pieceCollapse",listItem:$.piece,activeOption:$.activeOption,option:"拼圖片數",onChangeOption:E.changeOption},null,8,["listItem","activeOption","onChangeOption"])]),Object(n["h"])("li",p,[Object(n["h"])("a",{href:"#",class:"list-group-item list-group-item-action",onClick:e[5]||(e[5]=Object(n["L"])((function(t){return E.collapseSwitch("styleCollapse")}),["prevent"]))},"拼圖風格"),Object(n["h"])("i",{class:["bi bi-chevron-down position-absolute icon",{iconActive:$.openCollapse.styleCollapse}]},null,2),Object(n["h"])(M,{ref:"styleCollapse",listItem:$.style,activeOption:$.activeOption,option:"拼圖風格",onChangeOption:E.changeOption},null,8,["listItem","activeOption","onChangeOption"])])])]),Object(n["h"])("div",d,[Object(n["K"])(Object(n["h"])("select",{class:"form-select mb-3",onChange:e[6]||(e[6]=function(t){return E.changeSelectOption()}),"onUpdate:modelValue":e[7]||(e[7]=function(t){return $.selectOption.menu=t})},[h],544),[[n["F"],$.selectOption.menu]]),!0===$.selectOption.pieceShow?Object(n["K"])((Object(n["t"])(),Object(n["d"])("select",{key:0,class:"form-select mb-3",onChange:e[8]||(e[8]=function(t){return E.changeOption($.selectOption.piece,$.selectOption.menu)}),"onUpdate:modelValue":e[9]||(e[9]=function(t){return $.selectOption.piece=t})},[b],544)),[[n["F"],$.selectOption.piece]]):Object(n["e"])("",!0),!0===$.selectOption.styleShow?Object(n["K"])((Object(n["t"])(),Object(n["d"])("select",{key:1,class:"form-select mb-3",onChange:e[10]||(e[10]=function(t){return E.changeOption($.selectOption.style,$.selectOption.menu)}),"onUpdate:modelValue":e[11]||(e[11]=function(t){return $.selectOption.style=t})},[f],544)),[[n["F"],$.selectOption.style]]):Object(n["e"])("",!0)]),Object(n["h"])("div",O,[Object(n["h"])("ul",g,[(Object(n["t"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])($.renderProducts,(function(e,i){return Object(n["t"])(),Object(n["d"])("li",{ref:"card",class:"col-xl-4 col-md-6 mb-3",key:e.id},[Object(n["h"])("div",{class:"card productCard",onClick:function(t){return E.toProduct(e.id)}},[Object(n["h"])("div",v,[Object(n["h"])("img",{src:e.imageUrl,alt:"產品圖片",class:"horizontal"},null,8,["src"])]),Object(n["h"])("div",j,[Object(n["h"])("div",m,[Object(n["h"])("div",null,[Object(n["h"])("h5",y,Object(n["B"])(e.title),1),e.price<e.origin_price?(Object(n["t"])(),Object(n["d"])("p",P,[Object(n["g"])(" NT$"+Object(n["B"])(t.toCurrency(e.price)),1),Object(n["h"])("span",C,[Object(n["g"])(" NT$"+Object(n["B"])(t.toCurrency(e.origin_price))+" ",1),e.allPiece.length>1?(Object(n["t"])(),Object(n["d"])("span",w)):Object(n["e"])("",!0)])])):(Object(n["t"])(),Object(n["d"])("p",x,[Object(n["g"])("NT$"+Object(n["B"])(t.toCurrency(e.origin_price))+" ",1),e.allPiece.length>1?(Object(n["t"])(),Object(n["d"])("span",k)):Object(n["e"])("",!0)]))]),Object(n["h"])("div",L,[Object(n["h"])("div",I,[(Object(n["t"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])(e.allPiece,(function(t,o){return Object(n["t"])(),Object(n["d"])("button",{class:["pieceBtn badge pieceBadge",{active:e.currentIdIndex===o}],disabled:e.currentIdIndex===o,key:t,onClick:Object(n["L"])((function(t){return E.changePiece(e,i,o)}),["stop"])},Object(n["B"])(t)+"片",11,["disabled","onClick"])})),128))]),Object(n["h"])("button",{class:["favoriteArea",{active:$.myFavorite.includes(e.id)}],onClick:Object(n["L"])((function(t){return E.addMyFavorite(e)}),["stop"])},[S,B],10,["onClick"]),Object(n["h"])("button",{type:"button",class:"btn btn-primary addCardBtn",onClick:Object(n["L"])((function(t){return E.addCart(e)}),["stop"])},"加入購物車",8,["onClick"]),D])])])],8,["onClick"])],512)})),128))]),Object(n["h"])(N,{paginationData:$.paginationData,onGetData:E.getRenderProducts},null,8,["paginationData","onGetData"])])])])]),$.getProductListLoading?(Object(n["t"])(),Object(n["d"])("div",_,[F])):Object(n["e"])("",!0)],64)}i("99af"),i("159b"),i("d3b7"),i("25f0"),i("a434");var $={class:"collapse",ref:"collapse"},E={class:"collapseList list-unstyled text-center d-flex flex-column"};function M(t,e,i,o,c,a){return Object(n["t"])(),Object(n["d"])("div",$,[Object(n["h"])("ul",E,[(Object(n["t"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])(i.listItem,(function(t){return Object(n["t"])(),Object(n["d"])("li",{key:t},[Object(n["h"])("a",{href:"#",class:["d-block text-decoration-none py-2",{collapseListActive:i.activeOption===t}],onClick:Object(n["L"])((function(e){return a.changeOption(t,i.option)}),["prevent"])},Object(n["B"])(t),11,["onClick"])])})),128))])],512)}var N=i("7b17"),T={data:function(){return{collapseList:{}}},emits:["changeOption"],props:["listItem","option","activeOption"],methods:{collapseSwitch:function(){this.collapseList.toggle()},changeOption:function(t,e){this.$emit("changeOption",t,e)}},mounted:function(){this.collapseList=new N["a"](this.$refs.collapse,{toggle:!1})}};T.render=M;var J=T,U=i("1799"),K={save:function(t){var e=JSON.stringify(t);localStorage.setItem("pinpinFavorite",e)},get:function(){return JSON.parse(localStorage.getItem("pinpinFavorite"))}},R={data:function(){return{allProducts:[],paginationData:{},products:[],filterAllProducts:[],renderProducts:[],piece:["100","500","1000","2000","4000"],style:["風景","建築","動物","插畫"],openCollapse:{pieceCollapse:!1,styleCollapse:!1},activeOption:"全部拼圖",selectOption:{menu:"全部拼圖",piece:"",style:"",pieceShow:!1,styleShow:!1},saleOption:!1,myFavorite:K.get()||[],getProductListLoading:!0}},components:{CollapseList:J,Pagination:U["a"]},methods:{getAllProductsData:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/products/all");this.$http.get(e).then((function(e){e.data.success?(t.allProducts=e.data.products,t.allProductsProcessing(),"sale"!==t.$route.query.option||t.saleOption||(t.changeOption("本月優惠"),t.selectOption.menu="本月優惠",t.saleOption=!0),t.getProductListLoading=!1):t.$swal({title:"產品資訊讀取失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){t.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},allProductsProcessing:function(){var t=this;this.products=[],this.allProducts.forEach((function(e){if(1===e.sameProductNum[0]&&e.sameProductNum[1]>1){t.products.push(e);var i=t.products.length-1;t.products[i].currentIdIndex=0,t.products[i].allId=[],t.allProducts.forEach((function(n){e.title===n.title&&e.id!==n.id&&e.allPiece.forEach((function(o,c){o===n.piece?t.products[i].allId[c]=n.id:o===e.piece&&(t.products[i].allId[c]=e.id)}))}))}else if(1===e.sameProductNum[1]){t.products.push(e);var n=t.products.length-1;t.products[n].currentIdIndex=0,t.products[n].allId=[],t.products[n].allId.push(e.id)}})),this.products.reverse(),this.changeOption("全部拼圖")},collapseSwitch:function(t){this.$refs[t].collapseSwitch(),this.openCollapse[t]=!this.openCollapse[t]},changeOption:function(t,e){var i=this;this.getProductListLoading=!0,this.filterAllProducts=[],this.activeOption=t,this.selectOption.piece="",this.selectOption.style="","全部拼圖"===t?this.products.forEach((function(t){i.filterAllProducts.push(t)})):"本月新品"===t?this.products.forEach((function(t){t.isNewProduct&&i.filterAllProducts.push(t)})):"本月優惠"===t?this.products.forEach((function(t){t.price<t.origin_price&&i.filterAllProducts.push(t)})):"拼圖片數"===e?(this.selectOption.piece=t,this.products.forEach((function(e){e.allPiece.forEach((function(n){n.toString()===t&&i.filterAllProducts.push(e)}))}))):"拼圖風格"===e&&(this.selectOption.style=t,this.products.forEach((function(e){e.style.forEach((function(n){n===t&&i.filterAllProducts.push(e)}))}))),this.getPaginationData(),this.getRenderProducts()},getRenderProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;document.documentElement.scrollTop=0,this.getPaginationData(e),this.renderProducts=[];var i=10*(e-1),n=10*e-1;this.filterAllProducts.forEach((function(e,o){i<=o&&o<=n&&t.renderProducts.push(e)})),this.renderProducts.forEach((function(e,i){if(e.piece.toString()!==t.selectOption.piece&&""!==t.selectOption.piece){var n=e.allPiece.indexOf(parseInt(t.selectOption.piece,10));t.changePiece(e,i,n)}else""===t.selectOption.piece&&t.changePiece(e,i,0)})),setTimeout((function(){t.getProductListLoading=!1}),300)},getPaginationData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.getProductListLoading=!0;var e={};e.total_pages=Math.ceil(this.filterAllProducts.length/10),e.current_page=t,e.current_page+1>e.total_pages?e.has_next=!1:e.has_next=!0,1===e.current_page?e.has_pre=!1:e.has_pre=!0,this.paginationData=e},changeSelectOption:function(){this.selectOption.pieceShow=!1,this.selectOption.styleShow=!1,"拼圖片數"===this.selectOption.menu?this.selectOption.pieceShow=!0:"拼圖風格"===this.selectOption.menu?this.selectOption.styleShow=!0:this.changeOption(this.selectOption.menu)},addMyFavorite:function(t){this.myFavorite.includes(t.id)?(this.myFavorite.splice(this.myFavorite.indexOf(t.id),1),this.$swal({title:"將".concat(t.title,"從收藏列表中移除！"),showConfirmButton:!1,icon:"success",timer:2e3})):(this.myFavorite.push(t.id),this.$swal({title:"將".concat(t.title,"加入收藏！"),showConfirmButton:!1,icon:"success",timer:2e3})),K.save(this.myFavorite),this.emitter.emit("getfavoriteProduct")},changePiece:function(t,e,i){var n=this;this.renderProducts[e].currentIdIndex=i;var o=t.allId[i],c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/product/").concat(o);this.$http.get(c).then((function(t){t.data.success?(n.renderProducts[e].id=t.data.product.id,n.renderProducts[e].price=t.data.product.price,n.renderProducts[e].piece=t.data.product.piece,n.renderProducts[e].origin_price=t.data.product.origin_price):n.$swal({title:"產品切換失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){n.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},toProduct:function(t){this.$router.push("/product/".concat(t))},addCart:function(t){var e=this,i={data:{product_id:t.id,qty:1}},n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart");this.$http.post(n,i).then((function(i){i.data.success?(e.emitter.emit("getCartData"),e.$swal({title:"將".concat(t.title,"加入購物車！"),showConfirmButton:!1,icon:"success",timer:2e3})):e.$swal({title:"加入購物車失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){e.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))}},created:function(){var t=this;this.getAllProductsData(),this.emitter.on("addMyFavorite",(function(e){t.addMyFavorite(e)})),this.emitter.on("getFavorite",(function(){t.myFavorite=K.get()}))},unmounted:function(){var t=this;this.emitter.off("addMyFavorite",(function(e){t.addMyFavorite(e)})),this.emitter.off("getFavorite",(function(){t.myFavorite=K.get()}))}};R.render=A;e["default"]=R}}]);
//# sourceMappingURL=chunk-85764fa6.c5df43c5.js.map