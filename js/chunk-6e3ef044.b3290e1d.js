(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e3ef044"],{"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),o=c("2d00"),s=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],c=e.constructor={};return c[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"62b3":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a={class:"wrap"},o=Object(n["h"])("div",{class:"cartBanner"},[Object(n["h"])("div",{class:"titleArea"},[Object(n["h"])("h2",null,"結帳流程")])],-1),s={key:0,class:"container py-3 py-md-6"},i={class:"cartList table table-hover align-middle text-center"},r=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{width:"20%",class:"d-none d-md-table-cell"},"圖示"),Object(n["h"])("th",{width:"25%"},"產品名稱"),Object(n["h"])("th",{width:"20%"},"數量"),Object(n["h"])("th",{width:"20%"},"單價"),Object(n["h"])("th",{width:"15%"},"刪除")])],-1),l={class:"d-none d-md-table-cell d-flex justify-content-center"},u={class:"cartPictureArea"},d={class:"qtyArea d-flex justify-content-center"},b=Object(n["h"])("i",{class:"icon bi bi-dash-square"},null,-1),h=Object(n["h"])("i",{class:"hover bi bi-dash-square-fill"},null,-1),p=Object(n["h"])("i",{class:"icon bi bi-plus-square"},null,-1),j=Object(n["h"])("i",{class:"hover bi bi-plus-square-fill"},null,-1),f=Object(n["h"])("i",{class:"bi bi-x text-dark"},null,-1),O={class:"d-flex flex-column flex-md-row\n      justify-content-between align-items-end align-items-md-start"},m={class:"useCouponArea d-flex justify-content-end align-items-center mb-4"},y=Object(n["h"])("p",{class:"mb-0"},"使用優惠券：",-1),C={key:0,class:"couponArea text-end"},w={class:"d-flex justify-content-end align-items-end mb-4"},v=Object(n["h"])("p",{class:"mb-0 me-4"},"總金額",-1),g={class:"h3 fw-bold mb-0"},k={class:"d-flex justify-content-center"},x={key:1,class:"noCart text-center py-6"},B=Object(n["h"])("h2",{class:"h3 mb-4"},"購物車中沒有產品",-1),$={class:"d-flex justify-content-center"},D={key:2,class:"loading"},A=Object(n["h"])("div",{class:"icon"},null,-1);function q(t,e,c,q,U,T){var L=Object(n["y"])("BuySteps");return Object(n["t"])(),Object(n["d"])("div",a,[o,0!==U.cartData.carts.length?(Object(n["t"])(),Object(n["d"])("div",s,[Object(n["h"])(L,{step:U.step},null,8,["step"]),Object(n["h"])("table",i,[r,Object(n["h"])("tbody",null,[(Object(n["t"])(!0),Object(n["d"])(n["a"],null,Object(n["x"])(U.cartData.carts,(function(e){return Object(n["t"])(),Object(n["d"])("tr",{key:e.id},[Object(n["h"])("td",l,[Object(n["h"])("div",u,[Object(n["h"])("img",{src:e.product.imageUrl,alt:"產品圖片",class:{straight:"直"===e.product.category,horizontal:"橫"===e.product.category}},null,10,["src"])])]),Object(n["h"])("td",null,"【"+Object(n["B"])(e.product.piece)+"】"+Object(n["B"])(e.product.title),1),Object(n["h"])("td",null,[Object(n["h"])("div",d,[Object(n["h"])("button",{class:"qtyBtn",type:"button",onClick:function(t){return T.changeQty(e,"reduce")},disabled:1===e.qty},[b,h],8,["onClick","disabled"]),Object(n["h"])("span",null,Object(n["B"])(e.qty),1),Object(n["h"])("button",{class:"qtyBtn",type:"button",onClick:function(t){return T.changeQty(e,"add")}},[p,j],8,["onClick"])])]),Object(n["h"])("td",null,"NT$"+Object(n["B"])(t.toCurrency(e.product.price)),1),Object(n["h"])("td",null,[Object(n["h"])("button",{class:"deleteBtn",onClick:function(t){return T.deleteCartAlert("deleteOne",e)}},[f],8,["onClick"])])])})),128))])]),Object(n["h"])("div",O,[Object(n["h"])("button",{class:"btn btn-outline-dark mb-4 mb-md-0",type:"button",onClick:e[1]||(e[1]=function(t){return T.deleteCartAlert("deleteAll")})},"清空購物車"),Object(n["h"])("div",m,[y,Object(n["K"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return U.coupon=t}),disabled:U.isUseCoupon},null,8,["disabled"]),[[n["G"],U.coupon]]),U.isUseCoupon?(Object(n["t"])(),Object(n["d"])("button",{key:1,class:"btn btn-outline-dark",type:"button",onClick:e[4]||(e[4]=function(t){return U.isUseCoupon=!U.isUseCoupon})},"修改")):(Object(n["t"])(),Object(n["d"])("button",{key:0,class:"btn btn-outline-dark",type:"button",disabled:""===U.coupon,onClick:e[3]||(e[3]=function(){return T.useCoupon&&T.useCoupon.apply(T,arguments)})},"使用",8,["disabled"]))])]),U.cartData.total-U.cartData.final_total!==0?(Object(n["t"])(),Object(n["d"])("div",C,[Object(n["h"])("p",null,"優惠券折扣：-NT$"+Object(n["B"])(t.toCurrency(U.cartData.total-U.cartData.final_total)),1)])):Object(n["e"])("",!0),Object(n["h"])("div",w,[v,Object(n["h"])("p",g,"NT$"+Object(n["B"])(t.toCurrency(U.cartData.final_total)),1)]),Object(n["h"])("div",k,[Object(n["h"])("button",{class:"btn btn-outline-dark me-3",type:"button",onClick:e[5]||(e[5]=function(e){return t.$router.push("/products")})},"繼續購物"),Object(n["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[6]||(e[6]=function(e){return t.$router.push("/createOrder")})},"下一步")])])):(Object(n["t"])(),Object(n["d"])("div",x,[B,Object(n["h"])("div",$,[Object(n["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=function(e){return t.$router.push("/products")})},"開始選購")])])),U.cartLoading?(Object(n["t"])(),Object(n["d"])("div",D,[A])):Object(n["e"])("",!0)])}c("99af");var U=c("826a"),T={data:function(){return{step:1,cartData:{carts:[]},coupon:"",isUseCoupon:!1,cartLoading:!0}},components:{BuySteps:U["a"]},methods:{getCartData:function(){var t=this;this.cartLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart");this.$http.get(e).then((function(e){e.data.success?(t.cartData=e.data.data,0!==t.cartData.carts.length&&void 0!==e.data.data.carts[0].coupon&&(t.coupon=e.data.data.carts[0].coupon.code,t.isUseCoupon=!0),t.cartLoading=!1):t.$swal({title:"購物車資料讀取失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){t.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},changeQty:function(t,e){var c=this,n=t.qty;"add"===e?n+=1:n-=1;var a={data:{product_id:t.id,qty:n}},o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart/").concat(t.id);this.$http.put(o,a).then((function(e){e.data.success?(c.getCartData(),c.$swal({html:'<span class="fw-bold">【'.concat(t.product.piece,"】").concat(t.product.title,"</span>購買數量改為").concat(e.data.data.qty,"！"),showConfirmButton:!1,icon:"success",timer:3e3})):c.$swal({html:'<span class="fw-bold">【'.concat(t.product.piece,"】").concat(t.product.title,"</span>購買數量修改失敗！"),showConfirmButton:!1,icon:"error",timer:3e3})})).catch((function(){c.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},deleteCartAlert:function(t,e){var c=this,n="";n="deleteOne"===t?'<p>確定要將<span class="fw-bold">【'.concat(e.product.piece,"】").concat(e.product.title,"</span>從購物車刪除？</p>"):"確定要清空購物車？",this.$swal({title:"刪除確認",html:n,showCancelButton:!0,confirmButtonClass:"btn btn-danger me-3",confirmButtonText:"刪除",cancelButtonText:"取消"}).then((function(n){n.value&&("deleteOne"===t?c.deleteCart(e):c.deleteAllCart())}))},deleteCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart/").concat(t.id);this.$http.delete(c).then((function(c){c.data.success?(e.emitter.emit("getCartData"),e.getCartData(),e.$swal({html:'將<span class="fw-bold">【'.concat(t.product.piece,"】").concat(t.product.title,"</span>從購物車中刪除！"),showConfirmButton:!1,icon:"success",timer:3e3})):e.$swal({title:"購物車刪除失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){e.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},deleteAllCart:function(){var t=this;this.cartLoading=!0,document.documentElement.scrollTop=0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/carts");this.$http.delete(e).then((function(e){e.data.success?(t.emitter.emit("getCartData"),t.getCartData(),t.cartLoading=!1,t.$swal({title:"成功清空購物車！",showConfirmButton:!1,icon:"success",timer:2e3})):t.$swal({title:"清空購物車失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){t.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},useCoupon:function(){var t=this,e={data:{code:this.coupon}},c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/coupon");this.$http.post(c,e).then((function(e){e.data.success?(t.getCartData(),t.isUseCoupon=!0,t.$swal({title:"套用優惠券成功！",showConfirmButton:!1,icon:"success",timer:2e3})):t.$swal({title:"".concat(e.data.message),showConfirmButton:!1,icon:"error",timer:2e3})}))}},mounted:function(){this.getCartData()}};T.render=q;e["default"]=T},"826a":function(t,e,c){"use strict";var n=c("7a23"),a={class:"buySteps list-unstyled d-flex justify-content-evenly align-items-center\n    text-center px-6 mb-5"},o=Object(n["h"])("p",{class:"mb-0"},"1",-1),s=Object(n["h"])("p",{class:"mb-0"},"購物車列表確認",-1),i={key:0,class:"d-none d-md-block"},r=Object(n["h"])("i",{class:"bi bi-arrow-right-circle"},null,-1),l={key:1,class:"d-none d-md-block"},u=Object(n["h"])("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),d=Object(n["h"])("p",{class:"mb-0"},"2",-1),b=Object(n["h"])("p",{class:"mb-0"},"填寫購買人資料",-1),h={key:2,class:"d-none d-md-block"},p=Object(n["h"])("i",{class:"bi bi-arrow-right-circle"},null,-1),j={key:3,class:"d-none d-md-block"},f=Object(n["h"])("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),O=Object(n["h"])("p",{class:"mb-0"},"3",-1),m=Object(n["h"])("p",{class:"mb-0"},"確認付款",-1);function y(t,e,c,y,C,w){return Object(n["t"])(),Object(n["d"])("ul",a,[Object(n["h"])("li",{class:["buyStepsItem d-md-block",{stepActive:c.step>=1,"d-none":1!==c.step}]},[o,s],2),1===c.step?(Object(n["t"])(),Object(n["d"])("li",i,[r])):(Object(n["t"])(),Object(n["d"])("li",l,[u])),Object(n["h"])("li",{class:["buyStepsItem d-md-block",{stepActive:c.step>=2,"d-none":2!==c.step}]},[d,b],2),c.step<=2?(Object(n["t"])(),Object(n["d"])("li",h,[p])):(Object(n["t"])(),Object(n["d"])("li",j,[f])),Object(n["h"])("li",{class:["buyStepsItem d-md-block",{stepActive:c.step>=3,"d-none":3!==c.step}]},[O,m],2)])}var C={data:function(){return{}},props:["step"]};C.render=y;e["a"]=C},8418:function(t,e,c){"use strict";var n=c("c04e"),a=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var s=n(e);s in t?a.f(t,s,o(0,c)):t[s]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),s=c("861d"),i=c("7b0b"),r=c("50c4"),l=c("8418"),u=c("65f0"),d=c("1dde"),b=c("b622"),h=c("2d00"),p=b("isConcatSpreadable"),j=9007199254740991,f="Maximum allowed index exceeded",O=h>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),m=d("concat"),y=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},C=!O||!m;n({target:"Array",proto:!0,forced:C},{concat:function(t){var e,c,n,a,o,s=i(this),d=u(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],y(o)){if(a=r(o.length),b+a>j)throw TypeError(f);for(c=0;c<a;c++,b++)c in o&&l(d,b,o[c])}else{if(b>=j)throw TypeError(f);l(d,b++,o)}return d.length=b,d}})}}]);
//# sourceMappingURL=chunk-6e3ef044.b3290e1d.js.map