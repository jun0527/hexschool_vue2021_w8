(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7680f204"],{"1dde":function(t,e,c){var r=c("d039"),n=c("b622"),s=c("2d00"),o=n("species");t.exports=function(t){return s>=51||!r((function(){var e=[],c=e.constructor={};return c[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"826a":function(t,e,c){"use strict";var r=c("7a23"),n={class:"buySteps list-unstyled d-flex justify-content-evenly align-items-center\n    text-center px-6 mb-5"},s=Object(r["h"])("p",{class:"mb-0"},"1",-1),o=Object(r["h"])("p",{class:"mb-0"},"購物車列表確認",-1),a={key:0,class:"d-none d-md-block"},i=Object(r["h"])("i",{class:"bi bi-arrow-right-circle"},null,-1),b={key:1,class:"d-none d-md-block"},d=Object(r["h"])("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),l=Object(r["h"])("p",{class:"mb-0"},"2",-1),u=Object(r["h"])("p",{class:"mb-0"},"填寫購買人資料",-1),h={key:2,class:"d-none d-md-block"},p=Object(r["h"])("i",{class:"bi bi-arrow-right-circle"},null,-1),j={key:3,class:"d-none d-md-block"},O=Object(r["h"])("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),m=Object(r["h"])("p",{class:"mb-0"},"3",-1),f=Object(r["h"])("p",{class:"mb-0"},"確認付款",-1);function y(t,e,c,y,v,g){return Object(r["t"])(),Object(r["d"])("ul",n,[Object(r["h"])("li",{class:["buyStepsItem d-md-block",{stepActive:c.step>=1,"d-none":1!==c.step}]},[s,o],2),1===c.step?(Object(r["t"])(),Object(r["d"])("li",a,[i])):(Object(r["t"])(),Object(r["d"])("li",b,[d])),Object(r["h"])("li",{class:["buyStepsItem d-md-block",{stepActive:c.step>=2,"d-none":2!==c.step}]},[l,u],2),c.step<=2?(Object(r["t"])(),Object(r["d"])("li",h,[p])):(Object(r["t"])(),Object(r["d"])("li",j,[O])),Object(r["h"])("li",{class:["buyStepsItem d-md-block",{stepActive:c.step>=3,"d-none":3!==c.step}]},[m,f],2)])}var v={data:function(){return{}},props:["step"]};v.render=y;e["a"]=v},8418:function(t,e,c){"use strict";var r=c("c04e"),n=c("9bf2"),s=c("5c6c");t.exports=function(t,e,c){var o=r(e);o in t?n.f(t,o,s(0,c)):t[o]=c}},"99af":function(t,e,c){"use strict";var r=c("23e7"),n=c("d039"),s=c("e8b5"),o=c("861d"),a=c("7b0b"),i=c("50c4"),b=c("8418"),d=c("65f0"),l=c("1dde"),u=c("b622"),h=c("2d00"),p=u("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",m=h>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),f=l("concat"),y=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:s(t)},v=!m||!f;r({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,r,n,s,o=a(this),l=d(o,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(s=-1===e?o:arguments[e],y(s)){if(n=i(s.length),u+n>j)throw TypeError(O);for(c=0;c<n;c++,u++)c in s&&b(l,u,s[c])}else{if(u>=j)throw TypeError(O);b(l,u++,s)}return l.length=u,l}})},b0c0:function(t,e,c){var r=c("83ab"),n=c("9bf2").f,s=Function.prototype,o=s.toString,a=/^\s*function ([^ (]*)/,i="name";r&&!(i in s)&&n(s,i,{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(t){return""}}})},d31c:function(t,e,c){"use strict";c.r(e);c("b0c0");var r=c("7a23"),n={class:"wrap payment"},s={class:"cartBanner"},o={class:"titleArea"},a={key:0},i={key:1},b={key:0,class:"container py-3 py-md-6"},d={class:"row justify-content-center"},l={class:"col-md-8"},u={key:0,class:"OrderCompleted text-center pb-3 mb-4 bg-secondary"},h=Object(r["h"])("i",{class:"bi bi-check2-circle text-primary"},null,-1),p=Object(r["h"])("h3",{class:"h2"},"交易成功",-1),j=Object(r["h"])("p",{class:"h5"},"感謝購買，產品將於 1~3 個工作天出貨！",-1),O={class:"cartList table table-hover align-middle mb-0"},m=Object(r["h"])("thead",null,[Object(r["h"])("tr",{class:"text-center"},[Object(r["h"])("th",{width:"20%",class:"d-none d-md-table-cell"},"圖示"),Object(r["h"])("th",{width:"50%"},"產品名稱"),Object(r["h"])("th",{width:"20%"},"數量"),Object(r["h"])("th",{width:"30%"},"單價")])],-1),f={class:"d-none d-md-table-cell"},y={class:"cartPictureArea ms-auto me-auto"},v={class:"d-flex justify-content-end align-items-center px-2 py-2"},g=Object(r["h"])("p",{class:"mb-0"},"優惠券折扣",-1),w={class:"totalPrice mb-0 ms-3"},k={class:"d-flex justify-content-end align-items-center px-2 py-2 mb-4"},x=Object(r["h"])("p",{class:"mb-0"},"總金額",-1),B={class:"totalPrice h5 fw-bold mb-0 ms-3"},P={class:"mb-4"},C=Object(r["h"])("h3",{class:"h4 fw-bold border-bottom border-2 border-dark px-2 mb-0"},"訂單資訊",-1),$={class:"bg-secondary p-3"},A={class:"mb-2"},S={key:0,class:"mb-2"},D={key:1,class:"mb-2"},I={class:"mb-0"},L={class:"mb-4"},T=Object(r["h"])("h3",{class:"h4 fw-bold border-bottom border-2 border-dark px-2 mb-0"},"收件人資料",-1),E={class:"bg-secondary p-3"},N={class:"mb-2"},J={class:"mb-2"},M={class:"mb-2"},F={class:"mb-2"},_={class:"mb-0"},q={key:1,class:"mb-3 d-flex justify-content-center"},z={key:2,class:"mb-3 d-flex justify-content-center"},U={key:1,class:"loading"},Y=Object(r["h"])("div",{class:"icon"},null,-1);function G(t,e,c,G,H,K){var Q=Object(r["y"])("BuySteps");return Object(r["t"])(),Object(r["d"])("div",n,[Object(r["h"])("div",s,[Object(r["h"])("div",o,[H.isPayment?(Object(r["t"])(),Object(r["d"])("h2",a,"結帳完成")):(Object(r["t"])(),Object(r["d"])("h2",i,"結帳流程"))])]),"{}"!==JSON.stringify(H.order)?(Object(r["t"])(),Object(r["d"])("div",b,[H.isPayment?Object(r["e"])("",!0):(Object(r["t"])(),Object(r["d"])(Q,{key:0,step:H.step},null,8,["step"])),Object(r["h"])("div",d,[Object(r["h"])("div",l,[H.isPayment?(Object(r["t"])(),Object(r["d"])("div",u,[h,p,j])):Object(r["e"])("",!0),Object(r["h"])("table",O,[m,Object(r["h"])("tbody",null,[(Object(r["t"])(!0),Object(r["d"])(r["a"],null,Object(r["x"])(H.orderProducts,(function(e){return Object(r["t"])(),Object(r["d"])("tr",{class:"text-center",key:e.id},[Object(r["h"])("td",f,[Object(r["h"])("div",y,[Object(r["h"])("img",{src:e.product.imageUrl,alt:"產品圖片",class:{straight:"直"===e.product.category,horizontal:"橫"===e.product.category}},null,10,["src"])])]),Object(r["h"])("td",null,"【"+Object(r["B"])(e.product.piece)+"】"+Object(r["B"])(e.product.title),1),Object(r["h"])("td",null,Object(r["B"])(e.qty),1),Object(r["h"])("td",null,"NT$"+Object(r["B"])(t.toCurrency(e.product.price)),1)])})),128))])]),Object(r["h"])("div",v,[g,Object(r["h"])("p",w," -NT$"+Object(r["B"])(t.toCurrency(H.originPrice-H.order.total)),1)]),Object(r["h"])("div",k,[x,Object(r["h"])("p",B," NT$"+Object(r["B"])(t.toCurrency(H.order.total)),1)]),Object(r["h"])("div",P,[C,Object(r["h"])("div",$,[Object(r["h"])("p",A,"訂單日期："+Object(r["B"])(H.orderDate),1),H.isPayment?(Object(r["t"])(),Object(r["d"])("p",S,"訂單狀態：已付款")):(Object(r["t"])(),Object(r["d"])("p",D,"訂單狀態：未付款")),Object(r["h"])("p",I,"付款方式："+Object(r["B"])(H.order.user.payment_method),1)])]),Object(r["h"])("div",L,[T,Object(r["h"])("div",E,[Object(r["h"])("p",N,"收件人："+Object(r["B"])(H.order.user.name),1),Object(r["h"])("p",J,"e-mail："+Object(r["B"])(H.order.user.email),1),Object(r["h"])("p",M,"手機號碼："+Object(r["B"])(H.order.user.tel),1),Object(r["h"])("p",F,"收件地址："+Object(r["B"])(H.order.user.address),1),Object(r["h"])("p",_,"留言："+Object(r["B"])(H.order.message),1)])]),H.isPayment?(Object(r["t"])(),Object(r["d"])("div",q,[Object(r["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[1]||(e[1]=function(e){return t.$router.push("/products")})},"繼續購買")])):(Object(r["t"])(),Object(r["d"])("div",z,[Object(r["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[2]||(e[2]=function(){return K.payment&&K.payment.apply(K,arguments)})},"確認付款")]))])])])):Object(r["e"])("",!0),H.paymentLoading?(Object(r["t"])(),Object(r["d"])("div",U,[Y])):Object(r["e"])("",!0)])}c("99af"),c("b64b"),c("159b"),c("fb6a");var H=c("826a"),K={data:function(){return{step:3,order:{},orderProducts:[],cartId:"",orderDate:"",originPrice:0,isPayment:!1,paymentLoading:!0}},props:["id"],components:{BuySteps:H["a"]},methods:{getOrderData:function(){var t=this;this.paymentLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/order/").concat(this.id);this.$http.get(e).then((function(e){e.data.success?(t.order=e.data.order,t.getOrderDate(),t.getCartId(t.order.products),t.paymentLoading=!1):t.$swal({title:"訂單資訊讀取失敗！",showConfirmButton:!1,icon:"error",timer:2e3})})).catch((function(){t.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))},getCartId:function(t){var e=this;this.orderProducts=[],this.originPrice=0,this.cartId=Object.keys(t),this.cartId.forEach((function(c){t[c].id===c&&(e.orderProducts.push(t[c]),e.originPrice+=t[c].total)}))},getOrderDate:function(){var t=new Date(1e3*this.order.create_at);this.orderDate="".concat(t.getFullYear(),"/").concat((0+String(t.getMonth()+1)).slice(-2),"/").concat(t.getDate())},payment:function(){var t=this;this.paymentLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/pay/").concat(this.id);this.$http.post(e).then((function(e){e.data.success?(document.documentElement.scrollTop=0,t.paymentLoading=!1,t.isPayment=!0,t.$swal({title:"付款完成！",showConfirmButton:!1,icon:"success",timer:3e3})):t.$swal({title:"付款失敗！",showConfirmButton:!1,icon:"error",timer:3e3})})).catch((function(){t.$swal({title:"網頁發生錯誤，請重新整理此頁面！",showConfirmButton:!1,icon:"error",timer:2e3})}))}},mounted:function(){this.getOrderData()}};K.render=G;e["default"]=K},fb6a:function(t,e,c){"use strict";var r=c("23e7"),n=c("861d"),s=c("e8b5"),o=c("23cb"),a=c("50c4"),i=c("fc6a"),b=c("8418"),d=c("b622"),l=c("1dde"),u=l("slice"),h=d("species"),p=[].slice,j=Math.max;r({target:"Array",proto:!0,forced:!u},{slice:function(t,e){var c,r,d,l=i(this),u=a(l.length),O=o(t,u),m=o(void 0===e?u:e,u);if(s(l)&&(c=l.constructor,"function"!=typeof c||c!==Array&&!s(c.prototype)?n(c)&&(c=c[h],null===c&&(c=void 0)):c=void 0,c===Array||void 0===c))return p.call(l,O,m);for(r=new(void 0===c?Array:c)(j(m-O,0)),d=0;O<m;O++,d++)O in l&&b(r,d,l[O]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-7680f204.5c655a51.js.map