(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bd09067"],{"04d1":function(t,e,a){var c=a("342f"),l=c.match(/firefox\/(\d+)/i);t.exports=!!l&&+l[1]},"4e82":function(t,e,a){"use strict";var c=a("23e7"),l=a("1c0b"),o=a("7b0b"),n=a("50c4"),i=a("d039"),s=a("addb"),r=a("a640"),d=a("04d1"),u=a("d998"),h=a("2d00"),m=a("512c"),p=[],b=p.sort,f=i((function(){p.sort(void 0)})),j=i((function(){p.sort(null)})),O=r("sort"),g=!i((function(){if(h)return h<70;if(!(d&&d>3)){if(u)return!0;if(m)return m<603;var t,e,a,c,l="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(c=0;c<47;c++)p.push({k:e+c,v:a})}for(p.sort((function(t,e){return e.v-t.v})),c=0;c<p.length;c++)e=p[c].k.charAt(0),l.charAt(l.length-1)!==e&&(l+=e);return"DGBEFHACIJK"!==l}})),v=f||!j||!O||!g,D=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:String(e)>String(a)?1:-1}};c({target:"Array",proto:!0,forced:v},{sort:function(t){void 0!==t&&l(t);var e=o(this);if(g)return void 0===t?b.call(e):b.call(e,t);var a,c,i=[],r=n(e.length);for(c=0;c<r;c++)c in e&&i.push(e[c]);i=s(i,D(t)),a=i.length,c=0;while(c<a)e[c]=i[c++];while(c<r)delete e[c++];return e}})},"512c":function(t,e,a){var c=a("342f"),l=c.match(/AppleWebKit\/(\d+)\./);t.exports=!!l&&+l[1]},a434:function(t,e,a){"use strict";var c=a("23e7"),l=a("23cb"),o=a("a691"),n=a("50c4"),i=a("7b0b"),s=a("65f0"),r=a("8418"),d=a("1dde"),u=d("splice"),h=Math.max,m=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var a,c,d,u,f,j,O=i(this),g=n(O.length),v=l(t,g),D=arguments.length;if(0===D?a=c=0:1===D?(a=0,c=g-v):(a=D-2,c=m(h(o(e),0),g-v)),g+a-c>p)throw TypeError(b);for(d=s(O,c),u=0;u<c;u++)f=v+u,f in O&&r(d,u,O[f]);if(d.length=c,a<c){for(u=v;u<g-c;u++)f=u+c,j=u+a,f in O?O[j]=O[f]:delete O[j];for(u=g;u>g-c+a;u--)delete O[u-1]}else if(a>c)for(u=g-c;u>v;u--)f=u+c-1,j=u+a-1,f in O?O[j]=O[f]:delete O[j];for(u=0;u<a;u++)O[u+v]=arguments[u+2];return O.length=g-c+a,d}})},addb:function(t,e){var a=Math.floor,c=function(t,e){var n=t.length,i=a(n/2);return n<8?l(t,e):o(c(t.slice(0,i),e),c(t.slice(i),e),e)},l=function(t,e){var a,c,l=t.length,o=1;while(o<l){c=o,a=t[o];while(c&&e(t[c-1],a)>0)t[c]=t[--c];c!==o++&&(t[c]=a)}return t},o=function(t,e,a){var c=t.length,l=e.length,o=0,n=0,i=[];while(o<c||n<l)o<c&&n<l?i.push(a(t[o],e[n])<=0?t[o++]:e[n++]):i.push(o<c?t[o++]:e[n++]);return i};t.exports=c},d81d:function(t,e,a){"use strict";var c=a("23e7"),l=a("b727").map,o=a("1dde"),n=o("map");c({target:"Array",proto:!0,forced:!n},{map:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}})},d998:function(t,e,a){var c=a("342f");t.exports=/MSIE|Trident/.test(c)},f4fc:function(t,e,a){"use strict";a.r(e);var c=a("7a23"),l={class:"py-4"},o=Object(c["h"])("h2",{class:"text-center"},"商品管理",-1),n={class:"d-flex justify-content-end"},i={class:"table table-hover"},s=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",{width:"25%"},"商品名稱"),Object(c["h"])("th",{width:"15%"},"拼圖片數"),Object(c["h"])("th",{width:"15%"},"原價"),Object(c["h"])("th",{width:"15%"},"售價"),Object(c["h"])("th",{width:"15%"},"編輯狀態"),Object(c["h"])("th",{width:"15%"},"編輯")])],-1),r={key:0,class:"loading"},d=Object(c["h"])("div",{class:"icon"},null,-1);function u(t,e,a,u,h,m){var p=Object(c["y"])("Pagination"),b=Object(c["y"])("ProductModal"),f=Object(c["y"])("DeleteModal");return Object(c["t"])(),Object(c["d"])(c["a"],null,[Object(c["h"])("div",l,[o,Object(c["h"])("div",n,[Object(c["h"])("button",{type:"button",class:"btn btn-primary mb-3",onClick:e[1]||(e[1]=function(t){return m.openModal("addProduct")})},"建立新商品")]),Object(c["h"])("table",i,[s,Object(c["h"])("tbody",null,[(Object(c["t"])(!0),Object(c["d"])(c["a"],null,Object(c["x"])(h.products,(function(t,e){return Object(c["t"])(),Object(c["d"])("tr",{class:"align-middle",key:t.id},[Object(c["h"])("td",null,Object(c["B"])(t.title),1),Object(c["h"])("td",null,Object(c["B"])(t.piece)+"片",1),Object(c["h"])("td",null,Object(c["B"])(t.origin_price),1),Object(c["h"])("td",null,Object(c["B"])(t.price),1),Object(c["h"])("td",null,[Object(c["h"])("input",{class:"checkbox",type:"checkbox",id:"enabled".concat(t.id),onChange:function(t){return m.changeStatus("is_enabled",e)},checked:1===t.is_enabled},null,40,["id","onChange","checked"]),Object(c["h"])("label",{class:"checkbox me-3",for:"enabled".concat(t.id)},"啟用",8,["for"]),Object(c["h"])("input",{class:"checkbox",type:"checkbox",id:"newProduct".concat(t.id),onChange:function(t){return m.changeStatus("newProduct",e)},checked:t.isNewProduct},null,40,["id","onChange","checked"]),Object(c["h"])("label",{class:"checkbox",for:"newProduct".concat(t.id)},"新品",8,["for"])]),Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-primary me-2",onClick:function(t){return m.openModal("editProduct",e)}},"編輯",8,["onClick"]),Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return m.deleteProduct(t)}}," 刪除",8,["onClick"])])])})),128))])]),Object(c["h"])(p,{paginationData:h.paginationData,onGetData:m.getProductsData},null,8,["paginationData","onGetData"])]),h.getProductsLoading?(Object(c["t"])(),Object(c["d"])("div",r,[d])):Object(c["e"])("",!0),Object(c["h"])(b,{ref:"productModal",onGetProducts:m.getProductsData},null,8,["onGetProducts"]),Object(c["h"])(f,{ref:"deleteModal",onGetProducts:m.getProductsData},null,8,["onGetProducts"])],64)}var h=a("5530"),m=(a("99af"),a("1940")),p=a.n(m),b={ref:"modal",class:"modal fade",tabindex:"-1"},f={class:"modal-dialog productModal"},j={class:"modal-content"},O={class:"modal-header bg-dark text-white"},g={key:0,class:"modal-title"},v={key:1,class:"modal-title"},D={class:"modal-body row"},P={class:"col-6"},y={class:"formGroup mb-3"},k=Object(c["h"])("label",{for:"title",class:"form-label"},"商品名稱",-1),w={class:"formGroup mb-3"},U=Object(c["h"])("label",{for:"category",class:"form-label"},"商品分類",-1),x=Object(c["h"])("option",{value:"",selected:"",disabled:""},"請選擇拼圖分類",-1),M=Object(c["h"])("option",{value:"直"},"直",-1),V=Object(c["h"])("option",{value:"橫"},"橫",-1),I={class:"formGroup mb-3"},S=Object(c["h"])("label",{for:"piece",class:"form-label"},"拼圖片數",-1),_=Object(c["h"])("option",{value:"",selected:"",disabled:""},"請選擇拼圖片數",-1),N=Object(c["h"])("option",{value:"100"},"100片",-1),C=Object(c["h"])("option",{value:"500"},"500片",-1),G=Object(c["h"])("option",{value:"1000"},"1000片",-1),F=Object(c["h"])("option",{value:"2000"},"2000片",-1),$=Object(c["h"])("option",{value:"4000"},"4000片",-1),E={class:"formGroup mb-3"},K=Object(c["h"])("label",{for:"imageUrl",class:"form-label"},"商品圖片",-1),A={key:1,class:"d-flex justify-content-between"},q={class:"btnArea"},z={class:"formGroup mb-3"},B=Object(c["h"])("label",{for:"content",class:"form-label"},"商品介紹",-1),J={class:"priceArea mb-3"},L={class:"formGroup"},R=Object(c["h"])("label",{for:"origin_price",class:"form-label"},"原價",-1),T={class:"formGroup"},H=Object(c["h"])("label",{for:"price",class:"form-label"},"售價",-1),W={class:"formGroup"},Q=Object(c["h"])("label",{for:"unit",class:"form-label"},"單位",-1),X={class:"formGroup mb-3"},Y=Object(c["h"])("label",null,"拼圖風格：",-1),Z=Object(c["h"])("label",{class:"me-3",for:"landscape"},"風景",-1),tt=Object(c["h"])("label",{class:"me-3",for:"building"},"建築",-1),et=Object(c["h"])("label",{class:"me-3",for:"animal"},"動物",-1),at=Object(c["h"])("label",{class:"me-3",for:"illustration"},"插畫",-1),ct={key:0,class:"formGroup mb-3"},lt=Object(c["h"])("label",{class:"me-3",for:"is_enabled"},"是否啟用",-1),ot=Object(c["h"])("label",{for:"isNewProduct"},"本月新品",-1),nt={key:1,class:"formGroup mb-3"},it=Object(c["h"])("label",{for:"isSameProduct"},"是否有同款拼圖",-1),st=Object(c["h"])("label",null,"所有同款拼圖片數：",-1),rt=Object(c["h"])("label",{class:"me-3",for:"100"},"100片",-1),dt=Object(c["h"])("label",{class:"me-3",for:"500"},"500片",-1),ut=Object(c["h"])("label",{class:"me-3",for:"1000"},"1000片",-1),ht=Object(c["h"])("label",{class:"me-3",for:"2000"},"2000片",-1),mt=Object(c["h"])("label",{class:"me-3",for:"4000"},"4000片",-1),pt={key:3,class:"formGroup mb-3"},bt=Object(c["h"])("label",{for:"sameProduct",class:"form-label"},"同款拼圖順序",-1),ft={class:"col-6 px-2"},jt=Object(c["h"])("h2",{class:"text-center"},"主圖預覽",-1),Ot={class:"previewPicture"},gt={class:"modal-footer"},vt={key:0,type:"submit",class:"btn btn-primary"},Dt={key:1,type:"submit",class:"btn btn-primary"};function Pt(t,e,a,l,o,n){var i=Object(c["y"])("Field"),s=Object(c["y"])("ErrorMessage"),r=Object(c["y"])("Form");return Object(c["t"])(),Object(c["d"])("div",b,[Object(c["h"])("div",f,[Object(c["h"])("div",j,[Object(c["h"])(r,{onSubmit:e[27]||(e[27]=function(t){return n.postProduct(o.modal)}),key:o.clearForm},{default:Object(c["J"])((function(t){var a=t.errors;return[Object(c["h"])("div",O,["addProduct"===o.modal?(Object(c["t"])(),Object(c["d"])("h5",g,"商品建立")):(Object(c["t"])(),Object(c["d"])("h5",v,"商品編輯")),Object(c["h"])("button",{type:"button",class:"btn-close btn-close-white",onClick:e[1]||(e[1]=function(){return n.closeModal&&n.closeModal.apply(n,arguments)})})]),Object(c["h"])("div",D,[Object(c["h"])("div",P,[Object(c["h"])("div",y,[k,Object(c["h"])(i,{type:"text",class:["form-control",{"is-invalid":a["商品名稱"]}],id:"title",name:"商品名稱",placeholder:"請輸入商品名稱",rules:"required",modelValue:o.tempData.title,"onUpdate:modelValue":e[2]||(e[2]=function(t){return o.tempData.title=t})},null,8,["class","modelValue"]),Object(c["h"])(s,{name:"商品名稱",class:"invalid-feedback"})]),Object(c["h"])("div",w,[U,Object(c["h"])(i,{id:"category",class:["form-control",{"is-invalid":a["商品分類"]}],name:"商品分類",rules:"required",as:"select",modelValue:o.tempData.category,"onUpdate:modelValue":e[3]||(e[3]=function(t){return o.tempData.category=t})},{default:Object(c["J"])((function(){return[x,M,V]})),_:2},1032,["class","modelValue"]),Object(c["h"])(s,{name:"商品分類",class:"invalid-feedback"})]),Object(c["h"])("div",I,[S,Object(c["h"])(i,{id:"piece",class:["form-control",{"is-invalid":a["拼圖片數"]}],name:"拼圖片數",rules:"required",as:"select",modelValue:o.tempData.piece,"onUpdate:modelValue":e[4]||(e[4]=function(t){return o.tempData.piece=t})},{default:Object(c["J"])((function(){return[_,N,C,G,F,$]})),_:2},1032,["class","modelValue"]),Object(c["h"])(s,{name:"拼圖片數",class:"invalid-feedback"})]),Object(c["h"])("div",E,[K,o.isUploadImg?(Object(c["t"])(),Object(c["d"])("div",A,[Object(c["h"])(i,{type:"file",name:"file",class:"upImage",id:"upImage",onChange:n.getFile},null,8,["onChange"]),Object(c["h"])("div",q,[Object(c["h"])("button",{type:"button",class:"btn btn-primary btn-sm mb-1 me-2",disabled:!o.imgFiles,onClick:e[6]||(e[6]=function(){return n.uploadImg&&n.uploadImg.apply(n,arguments)})},"上傳圖片",8,["disabled"]),Object(c["h"])("button",{type:"button",class:"btn btn-secondary btn-sm mb-1",onClick:e[7]||(e[7]=function(){return n.changeIsUploadImg&&n.changeIsUploadImg.apply(n,arguments)})},"取消")])])):(Object(c["t"])(),Object(c["d"])("button",{key:0,type:"button",class:"btn btn-primary isUploadImageBtn",onClick:e[5]||(e[5]=function(){return n.changeIsUploadImg&&n.changeIsUploadImg.apply(n,arguments)})},"上傳圖片 ")),Object(c["h"])(i,{type:"url",id:"imageUrl",class:["form-control",{"is-invalid":a["圖片網址"]}],name:"圖片網址",placeholder:"請輸入圖片網址或上傳圖片",rules:n.isUrl,disabled:o.isUploadImg,modelValue:o.tempData.imageUrl,"onUpdate:modelValue":e[8]||(e[8]=function(t){return o.tempData.imageUrl=t})},null,8,["class","rules","disabled","modelValue"]),Object(c["h"])(s,{name:"圖片網址",class:"invalid-feedback"})]),Object(c["h"])("div",z,[B,Object(c["h"])(i,{type:"text",class:["form-control",{"is-invalid":a["商品介紹"]}],id:"content",name:"商品介紹",placeholder:"請輸入商品介紹",as:"textarea",rules:"required",modelValue:o.tempData.content,"onUpdate:modelValue":e[9]||(e[9]=function(t){return o.tempData.content=t})},null,8,["class","modelValue"]),Object(c["h"])(s,{name:"商品介紹",class:"invalid-feedback"})]),Object(c["h"])("div",J,[Object(c["h"])("div",L,[R,Object(c["h"])(i,{type:"number",class:["form-control",{"is-invalid":a["原價"]}],id:"origin_price",name:"原價",placeholder:"請輸入原價",rules:"required|min_value:0",min:"0",modelValue:o.tempData.origin_price,"onUpdate:modelValue":e[10]||(e[10]=function(t){return o.tempData.origin_price=t}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(c["h"])(s,{name:"原價",class:"invalid-feedback"})]),Object(c["h"])("div",T,[H,Object(c["h"])(i,{type:"number",class:["form-control",{"is-invalid":a["售價"]}],id:"price",name:"售價",placeholder:"請輸入售價",rules:n.priceRule,min:"0",modelValue:o.tempData.price,"onUpdate:modelValue":e[11]||(e[11]=function(t){return o.tempData.price=t}),modelModifiers:{number:!0}},null,8,["class","rules","modelValue"]),Object(c["h"])(s,{name:"售價",class:"invalid-feedback"})]),Object(c["h"])("div",W,[Q,Object(c["h"])(i,{type:"text",class:["form-control",{"is-invalid":a["單位"]}],id:"unit",name:"單位",placeholder:"請輸入單位(如：個)",rules:"required",modelValue:o.tempData.unit,"onUpdate:modelValue":e[12]||(e[12]=function(t){return o.tempData.unit=t})},null,8,["class","modelValue"]),Object(c["h"])(s,{name:"單位",class:"invalid-feedback"})])]),Object(c["h"])("div",X,[Y,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"landscape",value:"風景",name:"style","onUpdate:modelValue":e[13]||(e[13]=function(t){return o.tempData.style=t})},null,512),[[c["E"],o.tempData.style]]),Z,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"building",value:"建築",name:"style","onUpdate:modelValue":e[14]||(e[14]=function(t){return o.tempData.style=t})},null,512),[[c["E"],o.tempData.style]]),tt,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"animal",value:"動物",name:"style","onUpdate:modelValue":e[15]||(e[15]=function(t){return o.tempData.style=t})},null,512),[[c["E"],o.tempData.style]]),et,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"illustration",value:"插畫",name:"style","onUpdate:modelValue":e[16]||(e[16]=function(t){return o.tempData.style=t})},null,512),[[c["E"],o.tempData.style]]),at]),"addProduct"===o.modal?(Object(c["t"])(),Object(c["d"])("div",ct,[Object(c["h"])("input",{type:"checkbox",id:"is_enabled",name:"is_enabled",onChange:e[17]||(e[17]=function(t){return n.changeStatus("enabled")})},null,32),lt,Object(c["h"])("input",{type:"checkbox",id:"isNewProduct",name:"isNewProduct",onChange:e[18]||(e[18]=function(t){return n.changeStatus("newProduct")})},null,32),ot])):Object(c["e"])("",!0),"addProduct"===o.modal?(Object(c["t"])(),Object(c["d"])("div",nt,[Object(c["h"])("input",{type:"checkbox",id:"isSameProduct",name:"isSameProduct",onChange:e[19]||(e[19]=function(t){return n.changeStatus("isSameProduct")})},null,32),it])):Object(c["e"])("",!0),o.isSameProduct?(Object(c["t"])(),Object(c["d"])("div",{class:"formGroup mb-3",key:o.isSameProduct},[st,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"100",value:"100",name:"allPiece","onUpdate:modelValue":e[20]||(e[20]=function(t){return o.tempData.allPiece=t})},null,512),[[c["E"],o.tempData.allPiece]]),rt,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"500",value:"500",name:"allPiece","onUpdate:modelValue":e[21]||(e[21]=function(t){return o.tempData.allPiece=t})},null,512),[[c["E"],o.tempData.allPiece]]),dt,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"1000",value:"1000",name:"allPiece","onUpdate:modelValue":e[22]||(e[22]=function(t){return o.tempData.allPiece=t})},null,512),[[c["E"],o.tempData.allPiece]]),ut,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"2000",value:"2000",name:"allPiece","onUpdate:modelValue":e[23]||(e[23]=function(t){return o.tempData.allPiece=t})},null,512),[[c["E"],o.tempData.allPiece]]),ht,Object(c["K"])(Object(c["h"])("input",{type:"checkbox",id:"4000",value:"4000",name:"allPiece","onUpdate:modelValue":e[24]||(e[24]=function(t){return o.tempData.allPiece=t})},null,512),[[c["E"],o.tempData.allPiece]]),mt])):Object(c["e"])("",!0),o.tempData.allPiece.length>0&&o.isSameProduct?(Object(c["t"])(),Object(c["d"])("div",pt,[bt,Object(c["h"])(i,{type:"text",class:["form-control",{"is-invalid":a["同款拼圖順序"]}],id:"sameProduct",name:"同款拼圖順序",placeholder:"請輸入同款拼圖順序",rules:n.sameProductNumRule,modelValue:o.tempData.sameProductNum[0],"onUpdate:modelValue":e[25]||(e[25]=function(t){return o.tempData.sameProductNum[0]=t}),modelModifiers:{number:!0}},null,8,["class","rules","modelValue"]),Object(c["h"])(s,{name:"同款拼圖順序",class:"invalid-feedback"})])):Object(c["e"])("",!0)]),Object(c["h"])("div",ft,[jt,Object(c["h"])("div",Ot,[Object(c["h"])("img",{class:"w-100",src:o.tempData.imageUrl,alt:"圖片預覽"},null,8,["src"])])])]),Object(c["h"])("div",gt,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-dark","data-bs-dismiss":"modal",onClick:e[26]||(e[26]=function(){return n.closeModal&&n.closeModal.apply(n,arguments)})},"取消"),"addProduct"===o.modal?(Object(c["t"])(),Object(c["d"])("button",vt,"建立")):(Object(c["t"])(),Object(c["d"])("button",Dt,"編輯"))])]})),_:1})])])],512)}a("a434"),a("d81d"),a("4e82");var yt=a("7b17"),kt={data:function(){return{productModal:{},modal:"",tempData:{title:"",category:"",imageUrl:"",content:"",origin_price:"",price:"",unit:"",is_enabled:0,isNewProduct:!1,style:[],piece:"",allPiece:[],sameProductNum:[1,1]},isUploadImg:!1,imgFiles:"",clearForm:!1,editId:"",imagesFieldName:[],isSameProduct:!1}},emits:["getProducts"],methods:{openModal:function(){this.productModal.show(),this.clearForm=!1},closeModal:function(){this.productModal.hide(),this.clearForm=!0,this.clearData()},clearData:function(){this.tempData.title="",this.tempData.category="",this.tempData.imageUrl="",this.tempData.content="",this.tempData.origin_price="",this.tempData.price="",this.tempData.unit="",this.tempData.is_enabled=0,this.tempData.isNewProduct=!1,this.tempData.style=[],this.tempData.piece="",this.tempData.allPiece=[],this.tempData.sameProductNum=[1,1],this.editId="",this.imagesFieldName=[],this.isSameProduct=!1},isUrl:function(t){var e=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return this.tempData.imageUrl?!!e.test(t)||"圖片網址 格式不正確":"圖片網址 為必填欄位"},isImagesUrl:function(t){var e=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return""===t?"副圖網址沒有內容，如不輸入網址，請先刪除欄位！":!!e.test(t)||"副圖網址 格式不正確"},priceRule:function(t){return t?!(t>this.tempData.origin_price)||"售價 必須小於或等於原價":"售價 為必填欄位"},sameProductNumRule:function(t){return!t&&this.tempData.allPiece.length>0?"同款拼圖總數大於0，請輸入同款拼圖順位":!(t>this.tempData.allPiece.length)||"同款拼圖順位 必須在同款拼圖總數內"},changeIsUploadImg:function(){this.imgFiles="",this.isUploadImg=!this.isUploadImg},getFile:function(t){this.imgFiles=t.target.files},uploadImg:function(){var t=this,e=new FormData;e.append("file-to-upload",this.imgFiles[0]);var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/upload");this.$http.post(a,e).then((function(e){e.data.success?(t.tempData.imageUrl=e.data.imageUrl,t.changeIsUploadImg(),p()("圖片上傳成功！")):p()("圖片上傳失敗！")})).catch((function(){p()("網頁發生錯誤，請重新整理此頁面！")}))},changeStatus:function(t){"enabled"===t?0===this.tempData.is_enabled?this.tempData.is_enabled=1:this.tempData.is_enabled=0:"newProduct"===t?this.tempData.isNewProduct=!this.tempData.isNewProduct:"isSameProduct"===t&&(this.isSameProduct=!this.isSameProduct,this.tempData.allPiece=[],this.tempData.sameProductNum=[1,1])},addImages:function(){this.tempData.imagesUrl.push(""),this.imagesFieldName.push("副圖".concat(this.tempData.imagesUrl.length,"網址"))},deleteImage:function(t){this.tempData.imagesUrl.splice(t,1),this.imagesFieldName.pop()},postProduct:function(t){var e=this;if(this.tempData.piece=parseInt(this.tempData.piece,10),this.tempData.allPiece.length>0){var a=this.tempData.allPiece.map((function(t){return parseInt(t,10)}));a.sort((function(t,e){return t-e})),this.tempData.allPiece=a,this.tempData.sameProductNum[1]=this.tempData.allPiece.length}else this.tempData.allPiece.push(this.tempData.piece),this.tempData.sameProductNum=[1,1];if("addProduct"===t){var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/product");this.$http.post(c,{data:this.tempData}).then((function(t){t.data.success?(p()("商品建立成功！"),e.closeModal(),e.$emit("getProducts")):p()("商品建立失敗！")})).catch((function(){p()("網頁發生錯誤，請重新整理此頁面！")}))}else{var l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/product/").concat(this.editId);this.$http.put(l,{data:this.tempData}).then((function(t){t.data.success?(p()("商品修改成功！"),e.closeModal(),e.$emit("getProducts")):p()("商品修改失敗！")})).catch((function(){p()("網頁發生錯誤，請重新整理此頁面！")}))}}},mounted:function(){this.productModal=new yt["c"](this.$refs.modal,{backdrop:"static",keyboard:!1})}};kt.render=Pt;var wt=kt,Ut=a("ec05"),xt=a("1799"),Mt={data:function(){return{products:[],tempData:{},getProductsLoading:!0,paginationData:""}},components:{ProductModal:wt,DeleteModal:Ut["a"],Pagination:xt["a"]},methods:{getProductsData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;document.documentElement.scrollTop=0,this.getProductsLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/products?page=").concat(e);this.$http.get(a).then((function(e){e.data.success?(t.products=e.data.products,t.paginationData=e.data.pagination,t.getProductsLoading=!1):p()("產品資料讀取失敗！")})).catch((function(){p()("網頁發生錯誤，請重新整理此頁面！")}))},changeStatus:function(t,e){var a=this;this.getProductsLoading=!0;var c=0,l=!1;this.tempData=this.products[e],"is_enabled"===t?(c=1===t?0:1,this.tempData.is_enabled=c):(l=!this.products[e].isNewProduct,this.tempData.isNewProduct=l);var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/admin/product/").concat(this.tempData.id);this.$http.put(o,{data:this.tempData}).then((function(e){e.data.success?("is_enabled"===t?p()("將狀態更新為".concat(1===c?"啟用":"不啟用","！")):p()("將狀態更新為".concat(l?"新品":"非新品","！")),a.getProductsData(a.paginationData.current_page)):p()("更新產品狀態失敗！")})).catch((function(){p()("網頁發生錯誤，請重新整理此頁面！")}))},openModal:function(t,e){"editProduct"===t&&(this.$refs.productModal.tempData=Object(h["a"])({},this.products[e]),this.$refs.productModal.editId=this.products[e].id,this.$refs.productModal.isSameProduct=!0),this.$refs.productModal.modal=t,this.$refs.productModal.openModal()},deleteProduct:function(t){this.$refs.deleteModal.openModal(),this.$refs.deleteModal.deleteStatus="deleteProduct",this.$refs.deleteModal.deleteProduct=Object(h["a"])({},t)}},mounted:function(){this.getProductsData()}};Mt.render=u;e["default"]=Mt}}]);
//# sourceMappingURL=chunk-1bd09067.b7b88a4a.js.map